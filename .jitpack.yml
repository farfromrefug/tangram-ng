jdk:
  - openjdk17

before_install:
  - git submodule update --init
  - echo "sdk.dir=$ANDROID_HOME" > platforms/android/local.properties
  - yes | ${ANDROID_HOME}/cmdline-tools/latest/bin/sdkmanager --licenses > /dev/null || true
  - ${ANDROID_HOME}/cmdline-tools/latest/bin/sdkmanager --sdk_root="$ANDROID_SDK_ROOT" "platform-tools" "platforms;android-$ANDROID_API" "build-tools;$BUILD_TOOLS" "ndk;$ANDROID_NDK_VERSION" "cmake;$CMAKE_VERSION"

install:
  - bash -lc "cd platforms/android && ./gradlew tangram:assembleRelease tangram:publishAarPublicationToMavenLocal --stacktrace"

env:
  ANDROID_API: "36"
  NDK_VERSION: "28.2.13676358"
  BUILD_TOOLS: "35.0.0"
  CMAKE_VERSION: "3.30.5"