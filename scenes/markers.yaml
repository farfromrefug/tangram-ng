global:
    poi_sprite_fn: |
        function()
        {
          const tourism = { "viewpoint": "viewpoint", "camp_site": "campground", "information": "information",
            "museum": "museum", "hotel": "hotel", "motel": "hotel", "hostel": "hotel", "guest_house": "hotel",
            "bed_and_breakfast": "hotel", "chalet": "hotel", "alpine_hut": "hotel", "attraction": "attraction",
            "artwork": "artwork", "gallery": "shop"
          };
          const historic = { "monument": "artwork" };
          const leisure = { "fitness_centre": "gym", "sports_centre": "gym" };
          const amenity = { "parking": "parking", "bicycle_rental": "bike_shop", "university": "university",
            "school": "university", "college": "university", "kindergarten": "university",
            "restaurant": "restaurant", "fast_food": "restaurant", "ice_cream": "restaurant", "cafe": "cafe",
            "pharmacy": "pharmacy", "bar": "bar", "pub": "bar", "nightclub": "bar", "library": "library",
            "cinema": "theatre", "theatre": "theatre", "concert_hall": "theatre", "arts_centre": "theatre",
            "place_of_worship": "church", "bank": "bank", "hospital": "hospital", "clinic": "doctor", "doctors": "doctor",
            "fuel": "fuel", "dentist": "dentist", "toilets": "toilet", "drinking_water": "drinking_water",
            "water_point": "drinking_water"
          };
          const shop = { "beverages": "cafe", "confectionery": "cafe", "bakery": "bakery", "pastry": "bakery",
            "supermarket": "grocery", "convenience": "convenience", "greengrocer": "convenience", "deli": "convenience",
             "delicatessen": "convenience", "butcher": "convenience", "farm": "convenience", "alcohol": "liquor",
             "wine": "liquor", "clothes": "clothes", "tailor": "clothes", "fashion_accessories": "clothes",
             "shoes": "clothes", "fashion": "clothes", "hardware": "hardware", "doityourself": "hardware",
             "bicycle": "bike_shop", "chemist": "pharmacy", "car_repair": "auto_repair", "laundry": "laundry",
             "dry_cleaning": "laundry", "hairdresser": "scissor", "beauty": "scissor"
          };
          return tourism[feature.tourism] || leisure[feature.leisure] || amenity[feature.amenity] ||
              historic[feature.historic] || shop[feature.shop] || (feature.shop ? "shop" : "");
        }


textures:
    pois:
        url: img/pois.svg
        density: 2
        # sprites set from svg ids

    pois-search:
        url: img/pois-search.svg
        density: 2

    pick-marker:
        density: 2
        url: |
            data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24">
              <g fill="#CF513D" stroke="#000" stroke-opacity="0.2" stroke-width="1" stroke-alignment="inner">
                <path d="M5 8c0-3.517 3.271-6.602 7-6.602s7 3.085 7 6.602c0 3.455-2.563 7.543-7 14.527-4.489-7.073-7-11.072-7-14.527"/>
              </g>
            </svg>

    bookmark-marker:
        density: 2
        url: |
            data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24">
              <g fill="#12B5CB" stroke="#000" stroke-opacity="0.2" stroke-width="1" stroke-alignment="inner">
                <path d="M5 8c0-3.517 3.271-6.602 7-6.602s7 3.085 7 6.602c0 3.455-2.563 7.543-7 14.527-4.489-7.073-7-11.072-7-14.527"/>
              </g>
            </svg>


#styles:
#    dot-marker: { base: points, lighting: false, blend_order: 2000 }
#    pin-marker: { base: points, lighting: false, blend_order: 2001 }

layers:
    pick-marker:
        draw:
            marker:
                style: points
                texture: pick-marker
                size: 32px
                interactive: true
                collide: false
                priority: 'function() { return feature.priority; }'
                offset: [0px, -11px]
                text:
                    text_source: name
                    anchor: [right, left, bottom, top]
                    collide: true
                    optional: true
                    max_lines: 2
                    offset: [0px, -11px]
                    font:
                        family: Open Sans
                        weight: 600
                        size: 12px
                        fill: black
                        stroke: { color: white, width: 2px }

    bookmark-marker:
        draw:
            marker:
                style: points
                texture: bookmark-marker
                size: 26px
                interactive: true
                collide: false
                priority: 'function() { return (1+feature.priority)/1E6; }'
                offset: [0px, -11px]
                text:
                    text_source: name
                    anchor: [right, left, bottom, top]
                    collide: true
                    optional: true
                    max_lines: 2
                    offset: [0px, -11px]
                    font:
                        family: Open Sans
                        weight: 600
                        size: 12px
                        fill: black
                        stroke: { color: white, width: 2px }

    search-marker:
        draw:
            marker:
                style: points
                texture: pois-search
                sprite: global.poi_sprite_fn
                sprite_default: generic
                size: [[13, 16px], [15, 20px]]
                interactive: true
                collide: false
                priority: 'function() { return (1+feature.priority)/1E6; }'
                text:
                    text_source: name
                    anchor: [right, left, bottom, top]
                    collide: true
                    optional: true
                    max_lines: 2
                    font:
                        family: Open Sans
                        weight: 600
                        size: 12px
                        fill: black
                        stroke: { color: white, width: 2px }

    search-dot:
        draw:
            marker:
                style: points
                collide: false
                size: 6px
                color: "#CF513D"
                outline:
                    width: 1px
                    color: "#9A291D"

    loc-marker:
        draw:
            marker:
                style: points
                collide: false
                size: 16px
                color: "#0000FF"
                outline:
                    width: 2px
                    color: "#FFFFFF"

    track-marker:
        draw:
            marker:
                style: points
                collide: false
                size: 12px
                color: function() { return feature.color || '#0000FF'; }
                outline:
                    width: 1px
                    #color: "#9A291D"
                    color: white

    track:
        draw:
            track:
                style: lines
                interactive: true
                color: function() { return feature.color || '#0000FF'; }
                width: 2px
                order: 5000

    selected-track:
        draw:
            track:
                style: lines
                interactive: true
                color: function() { return feature.color || '#0000FF'; }
                width: 2px
                order: 5000
                outline:
                    width: 2px
                    color: white

    recording-track:
        draw:
            track:
                style: lines
                interactive: true
                color: function() { return feature.color || '#FF0000'; }
                width: 4px
                order: 5000
